<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Arrow : FE Test framework designed to promote TDD" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Getting Started With Arrow</title>
</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <a id="forkme_banner" href="https://github.com/yahoo/arrow">View on GitHub</a>

        <h1 id="project_title">Arrow</h1>
        <h2 id="project_tagline">FE Test framework designed to promote TDD</h2>

        <section id="downloads">
            <a class="zip_download_link" href="https://github.com/yahoo/arrow/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/yahoo/arrow/tarball/master">Download this project as a tar.gz file</a>
        </section>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">

        <h3>
            <a name="getting-started-with-arrow" class="anchor" href="#getting-started-with-arrow"><span class="octicon octicon-link"></span></a>Getting Started With Arrow</h3>

        <p>
            Arrow is fully supported on: <br>
            <ul>
            <li>Mac</li>
            <li>Linux</li>
            </ul>

        We are working on providing support for Windows.</p>

        <p>
        Installation consists of three main steps
        <ul>
            <li>PhantomJS installation</li>
            <li>Arrow installation</li>
            <li>Setting up Arrow and starting Arrow Server</li>
        </ul>
        </p>

        <h3>
            <a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

        <p>
            These instructions assume you do not have NPM and NodeJS installed. If you do, skip step 1
        <ul>

            <li>
                1. Install NodeJS and NPM
                <p>
                            Go to <a name="download" class="anchor" href="http://nodejs.org/#download"><span class="octicon octicon-link">download</span></a>
                    and follow the installation instructions.
                </p>

            </li>

            <li>

                2. Due to a bug in PhantomJS v1.5, Arrow's webdriver implementation expects PhantomJS v1.6 or higher. If you are using a version lower than 1.6, please update it. To install/update, please navigate to: <a href="http://phantomjs.org"> http://phantomjs.org/</a> and follow the instructions.
                <p></p>
            </li>

            <li>
                3. Copy the phantomjs binary to
                    <pre><code>/usr/local/bin</code></pre>
                <p></p>
            </li>

        <li>
            4. Make the phantomjs binary executable
            <pre><code>chmod +x phantomjs</code></pre>
            <p></p>
        </li>

        <li>
            5. Install Arrow Package through NPM
            <pre><code>npm install yahoo-arrow</code></pre>
            <p>
                <strong>NOTE</strong> - We prefer installing Arrow locally. Also, notice that it will install local Arrow inside ./node_modules/yahoo-arrow folder, right where you executed the above command.
            </p>
        </li>

        <li>
            6. Configure Arrow to allow for custom controllers (This step is only needed when you are installing Arrow globally)
            <pre><code>sudo ln -s /usr/local/lib /node_modules</code></pre>
        </li>

        <li>
            7. Start Arrow Server on the command prompt (note, this must be left <strong>ON</strong> or the process will die)
            <pre><code>./node_modules/.bin/arrow_server</code></pre>
        </li>



    </ul>
        <p>Now you may proceed to Install Verification.</p>

        <h3>
            <a name="selenium-server" class="anchor" href="#selenium-server"><span class="octicon octicon-link"></span></a>Selenium Server</h3>

        Arrow uses <a href="http://seleniumhq.org">Selenium Server</a> to execute all browser-related tests. Selenium should run on a machine which has access to the browsers you want to use. Normally Selenium Server will run on Mac or Windows Machine.

        <h4>
            <a name="start-selenium" class="anchor" href="#start-selenium"><span class="octicon octicon-link"></span></a>Start Selenium</h4>

        To start Selenium Server you simply need to do the following:
        <ul>
            <li>
                1. Download latest standalone selenium server jar from <a href='https://code.google.com/p/selenium/downloads/list'>Selenium Download Page</a>
                <p></p>
            </li>
            <li>
                2. To <strong>Run</strong> the Selenium executable type this:
                <p></p>
                <pre><code>java -jar path/to/selenium-server.jar</code></pre>
                <p><strong>Note</strong> Selenium Server is <strong>NOT</strong> required for Arrow to work. However, it is strongly recommended.</p>

                <p>
                    To start Selenium Server using chromedriver and default Firefox profile use
                    <pre><code>java -Dwebdriver.chrome.driver=./chromedriver -Dwebdriver.firefox.profile=default -jar selenium-server-standalone-2.xx.0.jar</code></pre>
                </p>
            </li>
        </ul>

        <h4>
            <a name="configure-phantomjs" class="anchor" href="#configure-phantomjs"><span class="octicon octicon-link"></span></a>Configure PhantomJs</h4>

        <p>To run phantomjs executable type this:
        <pre><code>phantomjs --webdriver=4445</code></pre></p>


        <h3>
            <a name="verifying-the-installation" class="anchor" href="#verifying-the-installation"><span class="octicon octicon-link"></span></a>Verifying the installation</h3>

        <p>Make sure you are able to execute ALL the commands below:</p>

        <h4>
            <a name="check-arrow-help" class="anchor" href="#check-arrow-help"><span class="octicon octicon-link"></span></a>Check Arrow Help</h4>

        <p>
            <pre><code>arrow --help</code></pre>
            <pre><code>OPTIONS :
--lib : a comma separated list of js files needed by the test
--page : (optional) path to the mock or production html page
example: http://www.yahoo.com or mock.html
--driver : (optional) one of selenium|browser. (default: selenium)
--browser : (optional) a comma separated list of browser names, optionally with a hyphenated version number.
Example : 'firefox-12.0,chrome-10.0' or 'firefox,chrome' or 'firefox'. (default: firefox)
--controller : (optional) a custom controller javascript file
--reuseSession : (optional) true/false. Determines whether selenium tests reuse existing sessions. (default: false)
Visit http://your_selenuim_host/wd/hub to setup sessions.
--parallel : (optional) test thread count. Determines how many tests to run in parallel for current session. (default: 1)
Example : --parallel=3 , will run three tests in parallel
--report : (optional) true/false.  creates report files in junit and json format. (default: true)
also prints a consolidated test report summary on console.
--reportFolder : (optional) folderPath.  creates report files in that folder. (default: descriptor folder path)
--testName : (optional) comma separated list of test name(s) defined in test descriptor
all other tests will be ignored.
--group : (optional) comma separated list of group(s) defined in test descriptor.
all other groups will be ignored.
--logLevel : (optional) one of DEBUG|INFO|WARN|ERROR|FATAL. (default: INFO)
--dimensions : (optional) a custom dimension file for defining ycb contexts
--context : (optional) name of ycb context
--seleniumHost : (optional) override selenium host url (example: --seleniumHost=http://host.com:port/wd/hub)
--capabilities : (optional) the name of a json file containing webdriver capabilities required by your project
EXAMPLES :
Unit test:
arrow test-unit.js --lib=../src/greeter.js
Unit test with a mock page:
arrow test-unit.js --page=testMock.html --lib=./test-lib.js
Unit test with selenium:
arrow test-unit.js --page=testMock.html --lib=./test-lib.js --driver=selenium
Integration test:
arrow test-int.js --page=http://www.hostname.com/testpage --lib=./test-lib.js
Integration test:
arrow test-int.js --page=http://www.hostname.com/testpage --lib=./test-lib.js --driver=selenium
Custom controller:
arrow --controller=custom-controller.js --driver=selenium</code></pre>
</p>

        <h4>
            <a name="check-arrow-version" class="anchor" href="#check-arrow-version"><span class="octicon octicon-link"></span></a>Check Arrow Version</h4>

        <p><pre><code>arrow --version</code></pre></p>
        <p><pre><code>v0.0.86</code></pre></p>

        <h4>
            <a name="confirm-you-can-run-the-arrow-server" class="anchor" href="#confirm-you-can-run-the-arrow-server"><span class="octicon octicon-link"></span></a>Confirm you can run the Arrow server</h4>

        <p><pre><code>arrow_server</code></pre></p>
        <p><pre><code>l2tp-8-16:test ivan$ arrow_server
        [2012-05-17 12:08:31.322] [INFO] console - Server running at: http://Ivans-MacBook-Air.local:4459
        [2012-05-17 12:08:32.105] [INFO] console - GhostDriver Running At : http://Ivans-MacBook-Air.local:4460</code></pre></p>

        <h4>
            <a name="confirm-selenium-is-running" class="anchor" href="#confirm-selenium-is-running"><span class="octicon octicon-link"></span></a>Confirm Selenium is Running</h4>

        <p>

        Though Selenium Server is NOT required, if you chose to run it, you can confirm it's running successfully like this:
        <ul>
        <li>
            From a Browser, go to: <a href="http://host.or.url:port/wd/hub">http://host.or.url:port/wd/hub</a> or <a href="http://localhost:4444/wd/hub">http://localhost:4444/wd/hub</a>
        </li>
        <li>
            You should be directed to a WebDriver page
        </li>

        </ul>
        </p>

        <h4>
            <a name="confirm-phantomjs-is-running" class="anchor" href="#confirm-phantomjs-is-running"><span class="octicon octicon-link"></span></a>Confirm PhantomJs is Running</h4>

        <p>
        Though phantomjs is NOT required, if you chose to run it, you can confirm it’s running successfully like this:

        From a browser, go to: <a href="http://host.or.url:port/wd/hub">http://host.or.url:port/wd/hub</a> or <a href="http://localhost:4445/wd/hub">http://localhost:4445/wd/hub</a> .You should see something like,

        <pre><code>Unknown Command - Request => {"headers":{"Accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/;q=0.8","Accept-Charset":"ISO-8859-1,utf-8;q=0.7,;q=0.3","Accept-Encoding":"gzip,deflate,sdch","Accept-Language":"en-US,en;q=0.8","Connection":"keep-alive","Host":"local host:4445","User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17"},"httpVersion":"1.1","method":"GET","url":"/wd/hub","urlParsed":{"anchor":"","query":"","file":"hub","directory":"/wd/","path":"/wd/hub","relative":"/wd/hub","port":"","host":"","password":"","user":"","userInfo":"","authority":"","pr otocol":"","source":"/wd/hub","queryKey":{},"chunks":["wd","hub"]}}</code></pre>


        </p>

        <h2>
            <a name="creating-a-test" class="anchor" href="#creating-a-test"><span class="octicon octicon-link"></span></a>Creating a test</h2>

        <p>
            You are now ready to create and execute your first test. For our first test we are going to validate a simple YUI Module. This YUI module has one method called <em>greet</em>. <em>greet</em> takes first and last name and inverts them as its output.

            <ul>
                 <li>1. Create a folder called <strong>arrow_test</strong>.</li>
                 <li>2. Inside arrow_test, create a folder called <strong>src</strong> (this will be our code source folder).</li>
                <li>3. Create a file called <strong>greeter.js</strong> inside src and paste the code below into it.
                    <pre><code>YUI.add("arrow-greeter", function (Y) {
                        Y.namespace("Arrow");

                        var Greeter = Y.Arrow.Greeter = function() {};

                        //This is a simple method which takes two params, first and last name
                        //It returns it as lastname, firstname
                        Greeter.prototype.greet = function(firstName, lastName) {
                        return lastName + ", " + firstName;
                        }
                        }, "0.1", {requires:[]});
                    </code></pre>
                </li>
                <li>
                    4. Inside arrow_test create a folder called <strong>tests</strong>.
                </li>
            <li>
                5. Create a file called <strong>test-greeter.js</strong> inside tests and past the code below into it.
                <pre><code>YUI({ useBrowserConsole: true }).use("arrow-greeter", "test", function(Y) {
                    //Create a basic test suite
                    //We're calling it "Our First Test"
                    var suite = new Y.Test.Suite("Our First Test");

                    //Add a test case to the suite; "test greet"
                    suite.add(new Y.Test.Case({
                    "test greet": function() {
                    var greeter = new Y.Arrow.Greeter();

                    //The method we are testing will inverse the firstname and lastname
                    //Our test will check for that inversion
                    Y.Assert.areEqual(greeter.greet("Joe", "Smith"), "Smith, Joe");
                    }
                    }));

                    //Note we are not "running" the suite.
                    //Arrow will take care of that. We simply need to "add" it to the runner
                    Y.Test.Runner.add(suite);
                    });</code></pre>
                Now we are ready to run our test.
            </li>
            <li>
                6. Navigate to
                <pre><code>~/arrow_test/tests</code></pre>
            </li>

            <li>
                7. Type this to execute your test
                <pre><code>../node_modules/.bin/arrow test-greeter.js --lib=../src/greeter.js --driver=nodejs</code></pre>
            </li>
            Congratulations, you've successfully installed Arrow and created your first test.

        </ul>
        </p>


    </section>
</div>


<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="inner">
        <p class="copyright">Arrow maintained by <a href="https://github.com/yahoo">Yahoo</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
    </footer>
</div>



</body>
</html>
